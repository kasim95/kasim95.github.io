---
title: "Rreddit 444"
date: 2020-05-31
tags: [web development, react, node.js, javascript]
header: 
    image: "/images/data_art.png"
excerpt: "A read only client for Reddit created using React and Node.js"
---


<script>
</script>

<style>

.proj_struct {
    list-style-type: disc;
    letter-spacing: normal;
    line-height: 10pt;
}

i {
    color: #f25278;
}

b {
    color: #f25278;
}

code {
    color: #f25278;
}

body {
    text-justify: auto;
}

</style>

<!-- Add an image here-->

Due to the COVID-19 pandemic in Summer 2020, I was one of the unlucky ones to not get an internship due to the prevailing economic crisis and a large number of companies scrapping their Summer internship programs. Also, the travel restrictions in-place meant that I could neither go on vacation. Hence, I decided to learn new technologies including one of the many Front end frameworks and the techniques of Natural Language Processing. Out of the three popular framework React, Vue and Angular, I decided to learn React due to its simplicity and the availability of JSX makes it quite easy to use logic for rendering. Also, the lifecycle methods give the developer more control over the Components to optimize the Project.

To practice my knowledge of React, I decided to make a reader for Reddit using React owing to the simplicity of its API to retrieve posts and comments.

The Project structure is as follows:
<ul class="proj_struct">
    <li>public
        <ul>
            <li>index.html</li>
        </ul>    
    </li>
    <li>src
        <ul>
            <li>actions</li>
            <li>actionTypes</li>
            <li>components</li>
            <li>containers</li>
            <li>middleware</li>
            <li>reducers</li>
            <li>App.css</li>
            <li>App.js</li>
            <li>helpers.js</li>
            <li>index.css</li>
            <li>index.js</li>
            <li>store.js</li>
        </ul>
    </li>
    <li>package.json</li>
</ul>

The <i>components</i> directory contains the React Components responsible to control the User Interface. The <i>containers</i> directory contains the React Component Container responsible to maintain the state and control which component to render depending on the values in the state. I used Redux to manage state across the Project. The <i>store</i> module contains the Redux store, the central place in the Project where all state information is stored. The <i>actions</i> module contains the various types of actions used to send information to the store and the <i>actionTypes</i> module is used to keep track of the list of actions. The <i>reducers</i> module contains the functions responsible for changing the state in store after an action is dispatched. Since this project fetches data from Reddit API, the REST API calls are to be performed asyncronously. Since Redux does not allow asynchronous calls, I used Redux Thunk middleware to make the asynchronous Fetch API calls located in <i>middleware</i> directory.

The <b>SubredditContainer</b> is the apex container for the Project responsible for making the Fetch calls while initially rendering the project and also on change of specific state values. It reads the name of selected subreddit and number of posts to retrieve from the Redux store and constructs a url with arguments which is then used to fetch data for posts using the fetchPosts middleware. The <b>PostContainer</b> is called by the SubredditContainer for each post distinguished with the postId prop. It is responsible for retrieving Post data from Redux store and calling the <b>Post Component </b> to render the UI for posts. The <b>CommentContainer</b> is responsible for fetching comments from the Reddit API using the Post Id. The middleware action <code>fetchComments</code> is used to dispatch the asynchronous action of fetching comments which are stored in the Redux store using <code>commentsReducer</code>. The 
<b>CommentContainer</b> then calls the <b>Comment Component</b> which is responsible for generating the UI for top level comments. Since the comments object is has a tree-like structure with each comment having subcomments and each subcomment having its own subcomments, the <b>Subcomment Component</b> is used to render the Subcomments. This allows more control over how comments can be shown and the depth level of comments below each post. Also, I am planning to implement a feature to view each Post in its own window with all comments in future. 

The state management in plain React becomes quite complicated with the increase in number of components especially while passing state as props from one component to another. Also, it is only possible to pass state as props from apex component to child components and not vice versa. Hence, this Project uses Redux owing to its centralized storage of state variables and the easy access of certain state variables using React Hooks. The <b>postsReducer</b> is called by three actions: FETCH_POSTS_REQUEST, FETCH_POSTS_SUCCESS & FETCH_POSTS_FAILURE in order to update the state variables to control conditional rendering of retrived posts during lifecyle of the <i>SubredditContainer</i>. The <b>commentsReducer</b> is called by three actions: FETCH_COMMENTS_REQUEST, FETCH_COMMENTS_SUCCESS & FETCH_COMMENTS_FAILURE in order to control rendering of comments and subcomments during lifecycle of the <i>CommentContainer</i>. The posts and comments are stored in redux store in <code>posts</code> and <code>comments</code> Redux store variables respectively. 

The <code>showSubredditModalReducer</code> is responsible to control the display of Change Subreddit Modal triggered using the <b>r/</b> button in the page header and tracked using the <code>showSubredditModal</code> variable in Redux store. This modal allows the user to change Subreddit and Number of posts shown on the webpage. The <code>subredditReducer</code> is responsible for changing the current active subreddit on the page using the <code>subreddit</code> variable in store. The number of posts shown on the webpage is maintained by <code>numPosts</code> store variable and changed by <code>numPostsReducer</code>. To mimic the Post filter on Reddit webpage, this Project implements four filters which can be applied to posts namely <i>Hot</i>, <i>Best</i>, <i>Top</i> & <i>New</i>. The <code>filter</code> store variable tracks the filter selected by the user using<code>filterReducer</code>.

The client also contains two routes Register and Login to register a new user and login an existing user to the webpage. Both the Register and Login pages are implemented using Formik forms owing to its simple API for initialization of values and validation of entered fields and the UI is enhanced using Material-UI theme. The <b>login</b> store variable keeps track of the logged in user data and is maintained using the <i>loginReducer</i>. To serve the authentication and registration for the webpage, this Project uses the Express module in Node.js as backend and MongoDB Document type database. The MongoDB Atlas Cloud Service is used to host the database. The backend implements the following three endpoints: 
<ul>
<li>/checkField</li>
<li>/registerUser</li>
<li>/loginUser</li>
</ul>

The <b>/checkField</b> REST endpoint is a Get Request API used to check if an account already exists  for a username or email in the database and is used for the Register User/Sign Up form. This endpoint is used to prevent redundant signups for the same email and to ensure usernames are unique for each user. This endpoint constructs a searchQuery with the entered username or email password and checks if an account already exists in the database. The response is sent to the user as a json with one of the field as <i>fieldExists</i> with true set when the account exists otherwise false. 

The <b>/registerUser</b> REST endpoint is a Post Request API used to register new user and store credentials in the MongoDB store. The Request body takes input as json with the following required fields:
<ul>
    <li>email: Email address of the user</li>
    <li>username: Unique username for the user</li>
    <li>password: Password required to login the user</li>
    <li>firstName: First name of the user</li>
    <li>lastName: Last name of the user</li>
    <li>birthdate: Birthdate of the user to show the appropriate content according to their age</li>
</ul>
The values entered by the user are validated against a set rules to check if each fulfills the criteria before storing them in the MongoDB database. The password is hashed using Blowfish block cipher cryptomatic algorithm which adds a random salt to the variable and hashes multiple times. It is implemented using the bcrypt Javascript module and stored in the MongoDB Atlas data store.

The <b>/loginUser</b>  REST endpoint is a Post Request API used to login the user. The Request body takes input as json with username and password as the required fields. The username is then queried to the database to verify if a user account exists. If the user exists, the entered password is validated against the stored password hash.

In the future, I plan to implement more functions like caching the retrieved posts and comments and using OAuth to authenticate the user.

The website demo can be viewed here: <a href="https://github.com/kasim95/rreddit_444" target="_blank">www.rreddit444.com</a>

The Project code can be viewed here:

<a href="https://github.com/kasim95/rreddit_444" target="_blank">Rreddit 444</a>

<a href="https://github.com/kasim95/rreddit_444_backend" target="_blank">Rreddit 444 Backend</a> 


